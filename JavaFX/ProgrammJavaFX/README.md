# Техническая документация к приложению **ProgrammJavaFX**

# Приложение состоит из следующих классов:

# Класс **HelloApplication**:
 - Данный класс представляет собой приложение JavaFX, которое использует WebSocket для связи и управления токарным станком.
Он представляет точку входа в графическую часть приложения и интеграцию с контроллером LatheController через FXML файл.

## Описание класса:

# Поля:
* **webSocketServer**: Экземпляр **WebSocketServer** для управления **WebSocket** соединениями.

# Методы:
* start(Stage primaryStage):
Метод, вызываемый при запуске приложения. Он загружает графический интерфейс из FXML файла, настраивает окно приложения, устанавливает максимальные размеры, инициализирует базу данных и контроллер LatheController, а также запускает WebSocket сервер.

* stop():
Метод для остановки приложения. Здесь происходит остановка WebSocket сервера, если он был запущен.

* startServer():
Приватный метод для запуска WebSocket сервера в отдельном потоке. Здесь также запускается метод main из класса CRUDController, который инициализирует веб-сервер.

* main(String[] args):
Статический метод, который является точкой входа в приложение. Он вызывает метод launch(args) для запуска JavaFX приложения.

## Использование класса **HelloApplication**:
Этот класс предназначен для использования в качестве точки входа и управления графическим интерфейсом JavaFX для управления токарным станком. Он интегрируется с LatheController через FXML файл, что позволяет управлять и мониторить операции станка через веб-интерфейс.


# Класс **LatheController**: 
 - Предназначен для управления графическим пользовательским интерфейсом (GUI)
приложения управления токарным станком с использованием JavaFX. 
 - Он отвечает за отображение и взаимодействие с различными компонентами 
пользовательского интерфейса, обработку пользовательских вводов и взаимодействие
с бэкэнд-сервисами и WebSocket-сервером для ведения журнала и получения данных.

## описание компонентов класса:

### Поля
* machineLogger: Экземпляр **MachineLogger** для ведения журнала операций станка.
* **webSocketServer**: Экземпляр **WebSocketServer** для обработки соединений WebSocket.
* **myWebSocketHandler**: Экземпляр MyWebSocketHandler для обработки сообщений WebSocket.
* **serviceGetDBDataForJavaFX**: Экземпляр ServiceGetDBDataForJavaFX для получения данных из базы данных.
* **serviceDB**: Экземпляр ServiceDB для взаимодействия с базой данных.
* **args**: Объект типа InterfaceMethods.Args для хранения номера плат.

### Компоненты пользовательского интерфейса:

### Кнопки
* **errorButton**: Логирует ошибки при работе станка с платой.
* **normalWorkButton**: Логирует нормальные операции станка с платой.
* **startButton**: Запускает новую операцию токарного станка с платой.
* **endButton**: Завершает текущую операцию токарного станка с платой.
* **warningButton**: Логирует предупреждения о возможных проблемах, при работе станка с платой.
* **selectImageButton**: Открывает окно выбора изображения(QR-code).
* **decodeButton**: Декодирует выбранное изображение(QR-code).
* **applySelectionButton**: Применяет выбранные режимы из CheckComboBox.
* **getDataByPlateNumber**: Получает данные по номеру платы.
* **clearButton**: Очищает все сообщения и поля ввода.

### Кнопки даты и времени
* **applayDataButton**: Применяет выбранную дату и время выбранную в календаре и часах
* **cancelDataButton**: Скрывает календарь и часы.
* **cleanDataTimeButton**: Очищает ввод даты и времени в поле ввода.
* **setCurrentTime**: Устанавливает текущие дату и время в календаре и часах.

### Кнопки периода
* **getMessageFromPeriod**: Получает сообщения с указанного периода ОТ...
* **getMessageTillPeriod**: Получает сообщения до указанного периода ДО...
* **getMessageFromTillPeriod**: Получает сообщения в указанном периоде ОТ... ДО...
* **applayAllFiltrs**: Применяет все фильтры для получения данных.
* **getMessageLastHour**:  Получает сообщения за последний час.
* **getMessageLastDay**:   Получает сообщения за последний день.
* **getMessageLastWeek**:  Получает сообщения за последнюю неделю.
* **getMessageLastMonth**: Получает сообщения за последний месяц.
* **getMessageLastYear**:  Получает сообщения за последний год.

### Колонки таблицы
* **plateNumberColumn**: Отображает номера плат, с которой работает станок.
* **messageColumn**: Отображает сообщения (сообщения о работе станка с платой).
* **typeEventColumn**: Отображает типы событий (режимы работы станка с платой)
* **timeEventColumn**: Отображает времена событий (когда началось событие).

### Другие компоненты пользовательского интерфейса:

#### tableView: Таблица для отображения сообщений.
* **checkComboBox**: Выпадающий список с выбираемыми элементами.
* **plateNumberInput**: Текстовое поле для ввода номера платы.
* **timePeriodFromInput**: Текстовое поле для ввода времени начала периода ОТ...
* **timePeriodTillInput**: Текстовое поле для ввода времени окончания периода ДО...
* **dataPicerField**: Поле выбора даты из календаря.
* **hourSpinner**, **minuteSpinner**, **secondSpinner**: Спиннеры для ввода времени (час, минуты, секунды).

#### Ярлыки
* **textChooseTimeLable**: Ярлык для выбора времени.
* **textChooseHourLable**: Ярлык для выбора часа.
* **textChooseMinuteLable**: Ярлык для выбора минуты.
* **textChooseSecondLable**: Ярлык для выбора секунды.
* **textChooseDataLable**: Ярлык для выбора даты.

#### Поля данных
* **messages**: Наблюдаемый список сообщений для отображения в tableView.
* **selectedFile**: Выбранный файл для декодирования.
* **activeTextField**: Текущее активное текстовое поле для ввода.

### Инициализация:
* Метод **initialize** настраивает начальное состояние компонентов пользовательского интерфейса и запускает фоновые сервисы:
* Инициализирует **fileCreator**, **machineLogger** и запускает **webSocketServer** в отдельном потоке.
* Конфигурирует видимость и инициализацию полей выбора даты/времени и спиннеров.
* Устанавливает обработчики событий для различных кнопок для обработки действий пользователя.

### Методы:
* **initializeDateTimePickers**: Инициализирует поля выбора даты/времени.
* **applyDateTime**: Применяет выбранную дату и время.
* **hideDateTimePicker**: Скрывает поле выбора даты/времени.
* **clearFieldInput**: Очищает ввод указанного текстового поля.
* **setCurrentTime**: Устанавливает текущее время в спиннерах.
* **choseEventsByCheckComboBox**: Применяет выбранные события из CheckComboBox.
* **applyAllFilters**: Применяет все фильтры для получения данных.
* **getDataByPlateNumber**: Получает данные по указанному номеру пластины.
* **checkContainsDataOfMillisecond**: Проверяет, что время включает миллисекунды.
* **getFileByPlateNumberAndWriteNewInformation**: Получает файл по номеру платы и записывает новую информацию.
* **startNewPlate**, logNormalOperation, logWarning, logError, endPlateOperation: Методы логирования в machineLogger.
* **broadcastMessage**: Отправляет сообщения клиентам через WebSocket.

## Использование класса **LatheController**:
 - Этот класс предназначен для использования в качестве контроллера для приложения JavaFX, управляющего работой токарного станка.
 - Данный контроллер связан с файлом **newFile.fxml**, который определяет макет GUI.


# Класс **CRUDController**:

 - Класс **CRUDController** представляет собой приложение на Java, которое запускает веб-сервер на порту 8098 и предоставляет REST API для работы с лог-файлами и другими данными.

## Описание класса:

**CRUDController** выполняет следующие функции:

- Инициализирует и запускает веб-сервер на порту 8098.
- Обрабатывает GET запросы к различным ресурсам, используя REST API.

### Поля

* **LOG_DIRECTORY**: Путь к директории с лог-файлами.
* **JSON_FILE_PATH**: Путь к JSON файлу для работы с данными.
* **jsonObject**: Объект JsonObject для работы с JSON данными.

### Методы

#### Основные методы

- **main(String[] strings)**: Основной метод, который настраивает веб-сервер и обрабатывает GET запросы к различным ресурсам.
  * **GET /getlog**: Возвращает список лог-файлов, находящихся в директории LOG_DIRECTORY, доступный по адресу http://localhost:8098/getlog.
    * **GET /log/:filename**: Возвращает содержимое лог-файла с указанным именем (:filename) или ошибку 404, если файл не найден.
    * **GET /currentPlateNumber**: Возвращает текущий номер платы или ошибку 404, если номер платы не задан.
    * **GET /getFeeder/:index**: Возвращает элемент из JSON массива по указанному индексу (:index).

#### Вспомогательные методы

* **getFeeder(String index)**: Возвращает элемент из JSON массива по указанному индексу.
* **initializeJsonObject()**: Инициализирует JsonObject из JSON файла.
* **getLogFileContent(String filename)**: Возвращает содержимое лог-файла с указанным именем.
* **getAllLogFiles()**: Возвращает список всех лог-файлов в директории LOG_DIRECTORY.

### Использование
 - Этот класс предназначен для управления лог-файлами и предоставления данных через REST API. Он может быть интегрирован с другими компонентами системы для мониторинга и управления данными приложения.


# Класс **MyWebSocketHandler**:

- Класс **MyWebSocketHandler** представляет собой обработчик сообщений от клиентов через WebSocket. 
Он обеспечивает управление подключениями, обработку сообщений, отправку широковещательных сообщений и обработку ошибок соединений.

## Описание класса:

**MyWebSocketHandler** выполняет следующие функции:
- Управляет **WebSocket** соединениями с клиентами.
- Обрабатывает сообщения от клиентов.
- Выполняет вызовы методов на основе полученных сообщений.
- Отправляет сообщения всем подключённым клиентам.
- Обрабатывает ошибки и закрытие соединений.

### Поля:
- **sessions**: `Map<Session, String>` - Коллекция для хранения активных сессий и связанных с ними имен пользователей.
- **invokeMethods**: `InvokeMethods` - Объект для вызова методов через рефлексию.
- **messageFromClient**: `String` - Последнее сообщение, полученное от клиента.

### Методы:

#### Основные методы:
- **onConnect(Session session)**: Метод вызывается при подключении нового клиента.
  - Сохраняет сессию и имя пользователя в коллекцию `sessions`.
  - Выводит информацию о новом подключении в консоль.

- **onMessage(Session session, String message)**: Метод вызывается при получении сообщения от клиента.
  - Преобразует входящее сообщение в объект `RequestMessage`.
  - Извлекает данные из `RequestMessage`.
  - Вызывает соответствующий метод на основе полученных данных.
  - Обрабатывает ошибки, если данные в сообщении некорректны.

- **onClose(Session session, int statusCode, String reason)**: Метод вызывается при закрытии соединения с клиентом.
  - Удаляет сессию из коллекции `sessions`.
  - Выводит информацию о разрыве соединения в консоль.

- **onError(Session session, Throwable throwable)**: Метод вызывается при возникновении ошибки в соединении.
  - Выводит информацию об ошибке в консоль.

- **broadcastMessage(String message)**: Метод отправляет сообщение всем подключённым клиентам.
  - Проходит по всем сессиям и отправляет сообщение, если сессия открыта.
  - Логирует отправленное сообщение.

#### Вспомогательные методы:
- **getPlateNumberFromWebSocketClientMessage(String message)**: Метод извлекает номер платы станка из сообщения клиента.
  - Преобразует сообщение в объект `RequestMessage`.
  - Возвращает значение поля `data`.

- **getClientMessage()**: Метод возвращает последнее сообщение, полученное от клиента.

### Использование:
Этот класс предназначен для использования в приложениях, где необходимо взаимодействие с клиентами через WebSocket. Он обеспечивает надежное управление соединениями и обработку сообщений в режиме реального времени.


# Класс **WebSocketServer**:

- Класс **WebSocketServer** представляет собой сервер WebSocket, который использует библиотеку Jetty для обработки входящих HTTP и WebSocket соединений. Этот сервер служит для взаимодействия с клиентами через WebSocket.

## Описание класса

**WebSocketServer** выполняет следующие функции:

- Запускает сервер на заданном порту.
- Настраивает обработчик WebSocket соединений.
- Останавливает сервер.

### Поля:
- **server**: `Server` - Легковесный HTTP-сервер Jetty для обработки входящих HTTP и WebSocket соединений.

### Методы:

- **start()**: Метод для запуска сервера.
  - Инициализирует сервер на порту 8095.
  - Настраивает обработчик WebSocket соединений с использованием анонимного класса, наследующего `WebSocketHandler`.
  - Регистрирует класс `MyWebSocketHandler` в качестве обработчика WebSocket-сообщений.
  - Запускает сервер и выводит сообщение о старте сервера в консоль.

- **stop()**: Метод для остановки сервера.
  - Останавливает сервер, если он был инициализирован.

### Использование:
 - Этот класс предназначен для запуска WebSocket сервера, который будет обрабатывать входящие соединения и сообщения от клиентов. Сервер использует порт 8095 для взаимодействия с клиентами.


# Класс **RequestMessage**:

 - Класс **RequestMessage** представляет собой объект, который инкапсулирует элементы запроса от клиента. Этот класс используется для передачи данных между клиентом и сервером в виде сообщений.

## Описание класса:
- **RequestMessage** содержит три основных поля: метод, сущность и данные.
Эти поля используются для определения действий, которые необходимо выполнить на сервере, и данных, необходимых для выполнения этих действий.

### Поля:
- **method**: `String` - Метод, указывающий на операцию, которую необходимо выполнить.
- **entity**: `String` - Сущность, на которую направлен запрос.
- **data**: `String` - Данные, связанные с запросом.

### Конструкторы:
**RequestMessage** предоставляет несколько конструкторов для создания объектов с различными комбинациями полей:

- **RequestMessage(String method, String entity, String data)**: Конструктор для создания объекта с полями method, entity и data.
- **RequestMessage(String method, String entity)**: Конструктор для создания объекта с полями method и entity.
- **RequestMessage(String method)**: Конструктор для создания объекта только с полем method.
- **RequestMessage()**: Конструктор по умолчанию, который создает пустой объект.

#### Методы Геттеры и Сеттеры:
Для каждого поля предусмотрены методы доступа (геттеры) и методы изменения (сеттеры):
- **getMethod()**: Возвращает значение поля method.
- **setMethod(String method)**: Устанавливает значение поля method.
- **getEntity()**: Возвращает значение поля entity.
- **setEntity(String entity)**: Устанавливает значение поля entity.
- **getData()**: Возвращает значение поля data.
- **setData(String data)**: Устанавливает значение поля data.

### Использование
- Этот класс предназначен для использования в системе, где клиент отправляет запросы серверу, указывая на определенные методы, сущности и данные. Пример создания и использования объекта **RequestMessage**:

# Класс **InterfaceMethods**:
- InterfaceMethods - это интерфейс, который определяет набор методов для работы с различными сущностями. Он включает в себя вложенный класс Args, который служит для передачи параметров в методы интерфейса.

## Описание интерфейса:
- Интерфейс InterfaceMethods включает следующие методы:

### Методы:
* void get(Args args) throws Exception: Метод для получения данных.
* void save(Args args) throws Exception: Метод для сохранения данных.
* void delete(Args args) throws Exception: Метод для удаления данных.
* void create(Args args) throws Exception: Метод для создания данных.
* void update(Args args) throws Exception: Метод для обновления данных.
* Эти методы должны быть реализованы классами, которые имплементируют данный интерфейс.

### Вложенный класс **Args**:
 - **Args** - это вложенный класс, который используется для передачи параметров в методы интерфейса InterfaceMethods. Он включает в себя различные поля, которые могут быть необходимы для выполнения методов.

### Поля:
* Session session: Сессия WebSocket.
* String data: Данные, передаваемые в метод.
* String jsonFileDirectory: Директория для хранения JSON-файлов.
* String logFileDirectory: Директория для хранения лог-файлов.
* static String plateNumber: Номер платы.
* Map<Session, String> sessions: Карта сессий.
* String entity: Сущность, с которой работает метод.

### Конструкторы:
 - **Args** предоставляет несколько конструкторов для создания объектов с различными комбинациями полей:

### Поля:
* Args(Session session, String data, String jsonFileDirectory, String logFileDirectory, String plateNumber, Map<Session, String> sessions, String entity): Полный конструктор.
* Args(Session session, String data, String jsonFileDirectory, String plateNumber): Конструктор без лог-файлов и сессий.
* Args(Session session, String data, String jsonFileDirectory): Конструктор без лог-файлов, номера платы и сессий.
* Args(Session session, String data): Конструктор с сессией и данными.
* Args(String data): Конструктор только с данными.
* Args(Session session): Конструктор только с сессией.
* Args(): Конструктор по умолчанию.

### Методы:
 **Args** предоставляет методы доступа (геттеры) и методы изменения (сеттеры):

* getPlateNumber(): Возвращает значение поля plateNumber.
* setPlateNumber(String plateNumber): Устанавливает значение поля plateNumber.


# Класс **LogEntity**:
**LogEntity** - это класс, который реализует интерфейс **InterfaceMethods** и описывает сущность, связанную с обработкой логов. Он содержит методы для выполнения операций **CRUD** (Create, Read, Update, Delete) над лог-сущностями и использует WebSocket для отправки JSON-ответов клиентам.

## Описание класса:
- Класс **LogEntity** представляет собой реализацию методов интерфейса **InterfaceMethods** для работы с лог-сущностями. Он включает следующие элементы:

### Поля:
- **private static Gson gson**: Объект Gson для сериализации объектов в формат JSON.
- **private JsonObject response**: Объект JsonObject для формирования ответов.

### Методы:

#### Реализация методов интерфейса InterfaceMethods:
- **void get(InterfaceMethods.Args args)**: Метод для получения данных. Выполняет поиск лог-файлов по номеру платы и отправляет ответ клиенту.
- **void update(InterfaceMethods.Args args)**: Метод для обновления данных. Отправляет ответ клиенту о выполнении операции обновления.
- **void save(InterfaceMethods.Args args)**: Метод для сохранения данных. Отправляет ответ клиенту о выполнении операции сохранения.
- **void delete(InterfaceMethods.Args args)**: Метод для удаления данных. Отправляет ответ клиенту о выполнении операции удаления.
- **void create(InterfaceMethods.Args args)**: Метод для создания данных. Отправляет ответ клиенту о выполнении операции создания.

#### Вспомогательные методы:
- **static void sendMessage(InterfaceMethods.Args args, JsonObject response)**: Метод для отправки сообщения клиенту в формате JSON через WebSocket-соединение.

# Класс **FileEntity**:

 - **FileEntity** - класс, который реализует интерфейс **InterfaceMethods** и описывает сущность, связанную с обработкой файлов. Он содержит методы для выполнения операций **CRUD** (Create, Read, Update, Delete) над файлами и использует WebSocket для отправки JSON-ответов клиентам.

## Описание класса:
- Класс **FileEntity** представляет собой реализацию методов интерфейса **InterfaceMethods** для работы с файлами. Он включает следующие элементы:

### Методы:

#### Реализация методов интерфейса InterfaceMethods:
- **void get(InterfaceMethods.Args args)**: Метод для получения данных из файла. В зависимости от переданного имени файла (args.data), выполняется получение JSON-файла или лог-файла.
- **void update(InterfaceMethods.Args args)**: Метод для обновления данных в файле. Отправляет клиенту содержимое файла.
- **void save(InterfaceMethods.Args args)**: Метод для сохранения данных в файле. Отправляет ответ клиенту о выполнении операции сохранения.
- **void delete(InterfaceMethods.Args args)**: Метод для удаления файла. Отправляет ответ клиенту о выполнении операции удаления.
- **void create(InterfaceMethods.Args args)**: Метод для создания нового файла. Отправляет ответ клиенту о выполнении операции создания.

#### Вспомогательные методы:
- **static void sendMessageFromFileEntity(InterfaceMethods.Args args, JsonObject response)**: Метод для отправки сообщения клиенту в формате JSON через WebSocket-соединение.

# Класс **FeederEntity**:
- **FeederEntity** - класс, реализующий интерфейс **InterfaceMethods** и описывающий сущность, связанную с обработкой данных Feeder. В классе определены методы для выполнения операций **CRUD** (Create, Read, Update, Delete) над Feeder и отправки ответов клиентам через WebSocket.

## Описание класса:
- Класс **FeederEntity** реализует методы интерфейса **InterfaceMethods** для работы с Feeder. Он включает следующие элементы:

### Методы:

#### Реализация методов интерфейса InterfaceMethods:
- **void get(InterfaceMethods.Args args)**: Метод для получения данных от Feeder. Выполняет проверку числа на превышение максимального значения (maxNumber) и отправляет ответ клиенту через WebSocket.
- **void save(InterfaceMethods.Args args)**: Пустой метод (временный заглушка).
- **void delete(InterfaceMethods.Args args)**: Пустой метод (временный заглушка).
- **void create(InterfaceMethods.Args args)**: Пустой метод (временный заглушка).
- **void update(InterfaceMethods.Args args)**: Пустой метод (временный заглушка).

#### Вспомогательные методы:
- **static void sendMessageFromFeederEntity(InterfaceMethods.Args args, JsonObject response)**: Метод для отправки JSON-ответа клиенту через WebSocket.


# Класс **MethodRegistry**:
- **MethodRegistry** - класс, который содержит названия методов в виде ключей и соответствующие им сущности в виде значений. Он предназначен для автоматического заполнения и доступа к методам через ключи.

## Описание класса:
- Класс **MethodRegistry** содержит статическое поле **methodMap**, представляющее собой Map с ключами типа String и значениями типа InterfaceMethods.

### Поля:
- **private static final Map<String, InterfaceMethods> methodMap**: Карта для хранения методов и сущностей, где ключом является String (название метода), а значением - соответствующая сущность, реализующая интерфейс **InterfaceMethods**.

### Методы:

#### Статические методы:
- **public static InterfaceMethods getMap(String key)**: Метод для получения значения из Map по ключу. Возвращает сущность, реализующую интерфейс **InterfaceMethods** для заданного ключа.

### Инициализация:
- Инициализация Map происходит статическим блоком кода класса:
* static {
    methodMap.put("log", new LogEntity());
    methodMap.put("file", new FileEntity());
    methodMap.put("feeder", new FeederEntity());
    // Другие методы и сущности могут быть добавлены по необходимости
}
###  Дополнительная информация:
 - Класс MethodRegistry предоставляет удобный механизм для доступа к методам, 
представленным различными сущностями (например, LogEntity, FileEntity, FeederEntity) 
через определенные ключи. Это позволяет легко добавлять и расширять функционал системы, 
используя механизмы автоматического обнаружения и регистрации методов.


# Класс **InvokeMethods**:
- **InvokeMethods** - класс, который содержит метод **invokeMethod**, использующий рефлексию для обработки сообщений клиенту в зависимости от входных параметров.

## Описание класса:
- Класс **InvokeMethods** предназначен для вызова методов, реализованных в объектах, реализующих интерфейс **InterfaceMethods**, с использованием рефлексии.

### Методы:

#### Методы класса:
- **public void invokeMethod(InterfaceMethods handler, String methodName, Object args, JsonObject response) throws Exception**:
Метод для вызова метода объекта **handler** с именем **methodName**, передавая ему аргументы **args** и формируя ответ **response** 
для клиента. В случае ошибок выбрасывает исключение **Exception**.

### Использование рефлексии:
- Метод **invokeMethod** ищет метод объекта **handler** по имени **methodName** среди всех публичных методов этого объекта. 
Если метод найден и его параметры соответствуют типу **InterfaceMethods.Args**, то он вызывается с переданными аргументами **args**.

### Дополнительная информация:
- Класс InvokeMethods предоставляет механизм для динамического вызова методов объектов, что особенно полезно в системах,
требующих обработки различных запросов и сообщений на стороне сервера.


# Класс **TransformationToJsonFormat**:
- **TransformationToJsonFormat** - класс, предназначенный для преобразования JSON-строки в объект класса **RequestMessage** с использованием библиотеки Gson.

## Описание класса:
- Класс **TransformationToJsonFormat** содержит статический метод **transformationToJsonFormat**, который выполняет десериализацию JSON-строки в объект класса **RequestMessage**.

### Поля класса:
- **private static Gson gson**: экземпляр Gson для работы с JSON.
- **private static RequestMessage requestMessage**: экземпляр класса RequestMessage для хранения результатов преобразования.

### Методы класса:

#### Метод **transformationToJsonFormat**
- **public static RequestMessage transformationToJsonFormat(String message)**: 
принимает строку **message** в формате JSON и преобразует её в объект класса **RequestMessage**
с помощью метода **fromJson** библиотеки Gson.
Возвращает объект **RequestMessage**, полученный после десериализации.


# Класс **QRCodeGenerator**:
- **QRCodeGenerator** - класс для генерации изображения QR-кода на основе входных данных.

## Описание класса:
- Класс **QRCodeGenerator** предоставляет статический метод **generateQRCodeImage**, который используется для создания изображения QR-кода на основе текстовой информации.

### Методы класса:

#### Метод **generateQRCodeImage**:
- **public static void generateQRCodeImage(String text, int width, int height, String filePath)**
  - **text**: текст, который будет закодирован в QR-код.
  - **width**: ширина изображения QR-кода в пикселях.
  - **height**: высота изображения QR-кода в пикселях.
  - **filePath**: путь к файлу, в который будет сохранено изображение QR-кода.

 Использование метода **generateQRCodeImage**:
 - использует библиотеку ZXing для генерации QR-кода. Он создает объект **QRCodeWriter**,
который кодирует текст в формат QR-кода с заданными параметрами **width** и **height**. Затем изображение сохраняется 
в указанный файл **filePath** в формате PNG.

# Класс **GetPlatformSpecificPath**:
- **GetPlatformSpecificPath** - класс для работы с путями в зависимости от операционной системы.

## Описание класса:
- Класс **GetPlatformSpecificPath** предоставляет статический метод **getPlatformSpecificPath**,
который используется для получения объекта **Path** в зависимости от операционной системы.

### Методы класса:

#### Метод **getPlatformSpecificPath**:
- **public static Path getPlatformSpecificPath(String... pathElements)**
  - **pathElements**: строки, представляющие элементы пути.
  - **Возвращает**: объект **Path** для указанных элементов пути.

 Описание метода **getPlatformSpecificPath**:
 Принимает переменное количество строк (**pathElements**), представляющих элементы пути.
 Он использует стандартные средства Java для работы с файловой системой и возвращает объект **Path**, 
 адаптированный под текущую операционную систему.

# Класс **SomeErrors**:
- **SomeErrors** - класс, содержащий методы обработки ошибок, используемые в приложении.

## Описание класса:
- Класс **SomeErrors** предоставляет статические методы для обработки различных ошибок, возникающих в процессе работы приложения, особенно в контексте веб-сокетов.

### Методы класса:

#### Метод **JsonForbiddenFormatError**:
- **public static void JsonForbiddenFormatError(Session session, String message, Map<Session, String> sessions)**
  - **session**: объект сессии WebSocket для отправки сообщения.
  - **message**: сообщение с ошибочным JSON форматом.
  - **sessions**: коллекция сессий WebSocket.
  - **Исключение**: IOException, возникающее при отправке сообщения.

  Метод **JsonForbiddenFormatError** используется для обработки ошибки недопустимого формата JSON.
Он выводит сообщение об ошибке и отправляет соответствующее сообщение клиенту через WebSocket.

#### Метод **innerErrorFromServer**:
- **public static void innerErrorFromServer(Session session, JsonObject response, Map<Session, String> sessions, Exception e)**
  - **session**: объект сессии WebSocket для отправки сообщения.
  - **response**: JSON объект для формирования ответа об ошибке.
  - **sessions**: коллекция сессий WebSocket.
  - **e**: исключение, вызванное ошибкой сервера.
  - **Исключение**: IOException, возникающее при отправке сообщения.

  Метод **innerErrorFromServer** предназначен для обработки внутренней ошибки сервера. Он формирует сообщение об ошибке и отправляет его клиенту через WebSocket.

#### Метод **errorAbsenceMethodInClientMessage**:
- **public static void errorAbsenceMethodInClientMessage(JsonObject response, Session session)**
  - **response**: JSON объект для формирования ответа об ошибке.
  - **session**: объект сессии WebSocket для отправки сообщения.

  Метод **errorAbsenceMethodInClientMessage** используется для обработки ошибки отсутствия метода в сообщении от клиента.
Он формирует сообщение об ошибке и отправляет его клиенту через WebSocket.

#### Метод **errorAbsenceEntityInClientMessage**:
- **public static void errorAbsenceEntityInClientMessage(JsonObject response, Session session)**
  - **response**: JSON объект для формирования ответа об ошибке.
  - **session**: объект сессии WebSocket для отправки сообщения.

  Метод **errorAbsenceEntityInClientMessage** обрабатывает ошибку отсутствия сущности в сообщении от клиента. 
Он формирует сообщение об ошибке и отправляет его клиенту через WebSocket.

#### Метод **errorAbsenceDataInClientMessage**:
- **public static void errorAbsenceDataInClientMessage(JsonObject response, Session session, Map<Session, String> sessions, String entity)**
  - **response**: JSON объект для формирования ответа об ошибке.
  - **session**: объект сессии WebSocket для отправки сообщения.
  - **sessions**: коллекция сессий WebSocket.
  - **entity**: сущность, отсутствующая в сообщении клиента.

  Метод **errorAbsenceDataInClientMessage** обрабатывает ошибку отсутствия данных в сообщении от клиента. Он формирует сообщение об ошибке
и отправляет его клиенту через WebSocket.


# Классы относящиеся к Базе Данных PostgreSQL:

#  Класс **ConfigDB**:
- **ConfigDB** - класс, отвечающий за соединение с базой данных PostgreSQL.

## Описание класса:
- Класс **ConfigDB** содержит статические поля для указания пути к базе данных PostgreSQL, имени пользователя и пароля. Также предоставляет статический метод для получения соединения с базой данных.

### Поля класса:

#### Поле **URL**:
- **private static final String URL = "jdbc:postgresql://localhost:5432/postgres";**:
  Путь к базе данных PostgreSQL. В данном случае указан локальный хост (localhost), порт 5432 и имя базы данных (postgres).
#### Поле **USER**:
- **private static final String USER = "postgres";**:
  Имя пользователя для доступа к базе данных PostgreSQL.
#### Поле **PASSWORD**:
- **private static final String PASSWORD = "oew";**:
  Пароль для доступа к базе данных PostgreSQL.

### Методы класса:

#### Метод **getConnection**:
- **public static Connection getConnection() throws SQLException**:
  Возвращает объект типа **Connection**, представляющий соединение с базой данных PostgreSQL.
  **Исключение** в методе: SQLException, возникает при ошибке соединения с базой данных.


# Класс **Event**:
- **Event** - класс, представляющий сущность событие, связанную с таблицей event в базе данных.

## Описание класса:
- Класс **Event** содержит поля, представляющие атрибуты события, такие как идентификатор, идентификатор платы, тип события, время события и сообщение о событии. Также класс включает конструкторы для инициализации объекта с различными наборами аргументов и методы доступа (геттеры и сеттеры) для установки и получения значений полей.

### Поля класса:

#### Поле **id**:
- **private int id;**: Идентификатор события.

#### Поле **plateId**:
- **private int plateId;**: Идентификатор связанной платы.

#### Поле **eventType**:
- **private String eventType;**: Тип события (например, начало, нормальная работа, ошибка, предупреждение, конец работы с платой).

#### Поле **eventTime**:
- **private Timestamp eventTime;**: Время произошедшего события.

#### Поле **eventMessage**:
- **private String eventMessage;**: Сообщение о произошедшем событии.

### Конструкторы класса:

#### Конструктор **Event(int id, int plateId, String eventType, Timestamp eventTime, String eventMessage)**:
- Инициализирует объект события с заданными значениями идентификатора, идентификатора платы, типа события, времени события и сообщения о событии.

#### Конструктор **Event(int plateId, String eventType, Timestamp eventTime, String eventMessage)**:
- Инициализирует объект события без заданного идентификатора события, только с идентификатором платы, типом события, временем события и сообщением о событии.

#### Конструктор **Event()**: 
- Пустой конструктор по умолчанию.

### Методы доступа:

#### Методы **get** и **set** для всех полей класса **Event**:
- **public void setId(int id)**
- **public void setPlateId(int plateId)**
- **public void setEventType(String eventType)**
- **public void setEventTime(Timestamp eventTime)**
- **public void setEventMessage(String eventMessage)**
- **public int getId()**
- **public int getPlateId()**
- **public String getEventType()**
- **public Timestamp getEventTime()**
- **public String getEventMessage()**

  Методы для установки и получения значений полей объекта класса **Event**.


# Класс **Message**Ж
- **Message** - класс, представляющий сообщение с полями для отображения информации в окне tableView.

## Описание класса:
- Класс **Message** содержит поля, представляющие различные аспекты сообщения, которые могут быть отображены в пользовательском интерфейсе. Каждое поле имеет соответствующий геттер и свойство для прямого доступа к значению поля.

### Поля класса:

#### Поле **plateNumberColumn**:
- **private final SimpleStringProperty plateNumberColumn;**:
  Строковое свойство, представляющее номер платы, к которому относится сообщение.

#### Поле **messageColumn**:
- **private final SimpleStringProperty messageColumn;**:
  Строковое свойство, представляющее текст сообщения.

#### Поле **typeEventColumn**:
- **private final SimpleStringProperty typeEventColumn;**
  Строковое свойство, представляющее тип события, связанного с сообщением.

#### Поле **timeEventColumn**:
- **private final SimpleObjectProperty<Timestamp> timeEventColumn;**
  Объектное свойство, представляющее временную метку события.

### Конструкторы:

#### Конструктор **Message(String plateNumberColumn, String messageColumn, String typeEventColumn, Timestamp timeEventColumn)**:
- Инициализирует объект сообщения с заданными значениями номера платы, текста сообщения, типа события и временной метки события.

### Методы доступа:

#### Геттеры и свойства для всех полей класса **Message**:
- **public String getPlateNumberColumn()**
- **public SimpleStringProperty plateNumberColumnProperty()**
- **public String getMessageColumn()**
- **public SimpleStringProperty messageColumnProperty()**
- **public String getTypeEventColumn()**
- **public SimpleStringProperty typeEventColumnProperty()**
- **public Timestamp getTimeEventColumn()**
- **public SimpleObjectProperty<Timestamp> timeEventColumnProperty()**

  Методы для получения значений полей объекта класса **Message** и их свойств.


# Класс **Plate**:
- **Plate** - класс, представляющий сущность платы с полями номера платы и первичным ключом.

## Описание класса:
- Класс **Plate** описывает сущность платы, которая может быть связана с другими сущностями в базе данных через первичный ключ **id**.

### Поля класса:

#### Поле **id**:
- **private int id;**:
  Целочисленное поле, представляющее первичный ключ в таблице **plates**.

#### Поле **plateNumber**:
- **private String plateNumber;**: 
  Строковое поле, представляющее номер платы станка.

### Конструкторы:

#### Конструкторы класса **Plate**:
- **public Plate(int id, String plateNumber)**:
  Инициализирует объект платы с заданными значениями первичного ключа **id** и номера платы **plateNumber**.
- **public Plate(String plateNumber)**:
  Инициализирует объект платы с заданным номером платы **plateNumber**.

- **public Plate()**: Пустой конструктор по умолчанию.

### Методы доступа:

#### Методы доступа к полям класса **Plate**:
- **public void setId(int id)**:
  Устанавливает значение первичного ключа **id**.

- **public void setPlateNumber(String plateNumber)**:
  Устанавливает значение номера платы **plateNumber**.

- **public int getId()**:
  Возвращает текущее значение первичного ключа **id**.
- **public String getPlateNumber()**:
  Возвращает текущее значение номера платы **plateNumber**.


# Класс **QuarysForPostgreSQL**:
- **QuarysForPostgreSQL** - класс, содержащий SQL-запросы для работы с таблицами **lathe_plates** и **events** в базе данных PostgreSQL.

## Описание:
- Класс **QuarysForPostgreSQL** хранит статические строки запросов, которые используются для извлечения данных из таблиц **lathe_plates** и **events**. Эти запросы могут быть использованы для выполнения различных операций с данными, таких как получение событий по типу, номеру платы, времени и другим критериям.

## Запросы:
- Получение событий по номеру платы: **QUERY_GET_PLATE_NUMBER**;
- Получение событий по конкретному времени: **QUERY_GET_EVENT_TIME_CONCRETE**;
- Получение событий с временем после указанного: **QUERY_GET_EVENT_TIME_FROM**;
- Получение событий с временем до указанного: **QUERY_GET_EVENT_TIME_TILL**;
- Получение событий в промежутке времени: **QUERY_GET_EVENT_TIME_BEETWEN**;
- Получение событий по номеру платы и в промежутке времени: **QUERY_ALL_FILTERS_PLATE_NUMBER_AND_BETWEEN_PERIOD**;


# Класс **ServiceDB**:
- **ServiceDB** - класс для работы с базой данных PostgreSQL и её таблицами **lathe_plates** и **events**.

## Описание:
- Класс **ServiceDB** предоставляет методы для создания таблиц в базе данных, вставки данных и обработки различных событий, связанных с работой станков и плат.

## Поля:
* `formatter`: Форматтер для обработки времени в формате "yyyy-MM-dd'T'HH:mm:ss.SSS".

## Методы:

### Создание таблиц:

#### **createTableLathe_platesIfNotExists()**:  создаёт таблицу lathe_plates;

### **createTableEventsIfNottExists()**:  создаёт таблицу events;

### **insertStartWork**:  обработка события startWork "начало работы станка с платой";

###  **updateWorkEvent**: обрабатывает все остальные события;

### **convertStringToTimestampForDB**: преобразования строки времени в Timestamp;

### **convertStringToTimestampWithMilisecond**: конвертация строки в тип Timestamp с добавлением миллисекунд;


# Класс **Service**:
- **ServiceDB**: класс для работы с базой данных PostgreSQL и её таблицами lathe_plates и events.

## Описание:
- Класс ServiceDB предоставляет методы для создания таблиц в базе данных, вставки данных и обработки различных событий, связанных с работой станков и плат.

### Поля:
- formatter: Форматтер для обработки времени в формате "yyyy-MM-dd'T'HH:mm
.SSS".

### Методы:
- Создание таблиц:

- **createTableLathe_platesIfNotExists()**:
Создает таблицу lathe_plates, если она не существует.

- **createTableEventsIfNottExists()**:
Создает таблицу events, если она не существует.

- **insertStartWork**:
Обрабатывает событие **startWork** - **"начало работы станка с платой"**.

- **updateWorkEvent**:
Обрабатывает все остальные события.

- **convertStringToTimestampForDB**:
Преобразует строку времени в формате "yyyy-MM-dd'T'HH:mm
.SSS" в тип Timestamp для базы данных.

- **convertStringToTimestampWithMilisecond**:
Конвертирует строку времени в тип Timestamp, включая миллисекунды.


# Блок относящийся к логированию файлов:

## **Класс MachineLogger**:
- MachineLogger - класс для логирования работы станка.

### Поля:
- **fileCreator**: Класс, создающий и записывающий файлы.
- **currentFileName**: Имя текущего файла лога.
- 
### Методы:
- **startNewPlate**:
Метод начала работы с платой. Метод начинает работу с указанной платой.
  * Параметры:
  - plateNumber: Серийный номер платы.
  - Функциональность: Создает сообщение о начале работы с платой.
  Формирует имя файла для лога.
  Если файл существует, дописывает сообщение в файл.
  Если файл не найден, создает новый лог-файл и добавляет сообщение о начале работы.
  Записывает информацию в базу данных о начале работы с новой платой.

- **logNormalOperation**:
Метод логирует сообщение о штатной работе
*  Параметры:
  -plateNumber: Серийный номер платы.
  -message: Сообщение о штатной работе.
  -Функциональность: Создает сообщение о штатной работе станка.
  Если файл существует, дописывает сообщение в файл.
  Если файл не найден, добавляет новую запись о нормальной работе станка в лог.
  Записывает информацию в базу данных о штатной работе.

- **logWarning**:
Метод логирует предупреждающие сообщения
* Параметры:
  - plateNumber: Серийный номер платы.
  - message: Предупреждающее сообщение.
  - Функциональность: Создает предупреждающее сообщение.
    Если файл существует, дописывает сообщение в файл.
    Если файл не найден, добавляет новую запись о предупреждении в лог.
    Записывает информацию в базу данных о предупреждении.

- **logError**:
Метод логирует сообщения об ошибках
  * Параметры:
  - plateNumber: Серийный номер платы.
  - message: Сообщение об ошибке.
  - Функциональность: Создает сообщение об ошибке.
  Если файл существует, дописывает сообщение в файл.
  Если файл не найден, добавляет новую запись об ошибке в лог

- **endPlateOperation**:
Метод логирует сообщение о завершении работы с платой
  * Параметры:
  - logMessage: Сообщение о завершении работы с платой.
  - plateNumber: Серийный номер платы.
  - Функциональность: Если файл существует, дописывает сообщение в файл.
  Если файл не найден, логирует сообщение о завершении работы с платой.
  Записывает информацию в базу данных о завершении работы с платой.

- **log**:
Выполняет запись логов в файл
  * Параметры:
  - message: Сообщение для записи в лог.
  - Функциональность: Создает файл, если имя текущего файла задано.
  Выводит сообщение об ошибке, если имя файла для логирования не задано

# **Класс ConfigManager**:
## Описание:
- Класс ConfigManager предоставляет методы для получения и установки значения свойства default.path, определяющего путь сохранения файлов по умолчанию.

### Поля:
* **defaultPath** - Строковое поле, содержащее значение пути по умолчанию для сохранения файлов.
### Конструктор:
Конструктор по умолчанию, инициализирует объект класса ConfigManager.

### Методы:
* **getDefaultPath**: Методы доступа к свойству default.path, возвращает текущее значение свойства default.path

# Класс **FileCreator**:
## Описание:
- Класс FileCreator предоставляет методы для создания и модификации файлов на основе заданных параметров и настроек.

### Поля:
* **configManager** - Объект класса ConfigManager, используемый для получения пути по умолчанию для сохранения файлов.

### Конструктор**:
- **FileCreator(ConfigManager configManager)**: Инициализирует объект класса FileCreator с переданным объектом ConfigManager для работы с настройками файловой системы.

### Методы:

* **createFile**: 
- Создает файл с заданным именем в указанном пути по умолчанию, добавляя указанное содержимое.
- Получает путь по умолчанию из объекта ConfigManager.
- Создает директорию, если она не существует.
- Создает файл с указанным именем и записывает в него заданное содержимое.

* **writeNewRecordIntoFoundFile**:
- Производит дозапись новой записи в указанный файл.
- Открывает файл для записи в конец (append mode).
- Записывает переданное сообщение в файл.


# краткие выводы:
- Приложение **ProgrammJavaFX** представляет собой мощный инструмент для автоматизации и мониторинга
  процессов работы станков, обеспечивая надёжное сохранение данных, визуализацию текущих событий
  и взаимодействие с внешними системами. Пользовательский интерфейс позволяет легко управлять настройками,
  мониторить состояние и анализировать данные, что делает его полезным инструментом для производственных
  и инженерных задач.
